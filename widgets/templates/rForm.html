<div class="${baseClass}">
  <form data-dojo-type="dijit/form/Form" data-dojo-attach-point="nForm">
    <div class="flex"> <!-- Flexbox base //-->
      <fieldset class="ui">
        <legend>Machine</legend>
        <label><span>Machine :</span><input class="ui" type="text" name="machine" data-dojo-attach-point="nMachineChange" /></label>
        <label><span>Commandée :</span><input class="ui" data-dojo-type="dijit/form/TextBox" data-dojo-attach-point="nTitle" name="title" /></label>
        <label><span>Critique :</span><input class="ui" data-dojo-type="dijit/form/TextBox" name="o-critic" /></label>
      </fieldset>
      <fieldset class="ui" data-dojo-attach-point="nEntryDetails">
        <legend>Caractéristiques</legend>
      </fieldset>

      <fieldset class="ui">
        <legend>Location</legend>
        <label><input data-dojo-type="dijit/form/CheckBox" data-dojo-attach-event="click:toggleDelivery" data-dojo-attach-point="nDelivery" /> Livraison différente</label>
        <label class="small"><span data-href="beginDate" class="targetable">Début :</span><input class="ui" data-dojo-type="dijit/form/DateTextBox" data-dojo-props="constraints: {datePattern: 'EEE dd.MM.yy'}" name="beginDate" data-dojo-attach-point="beginDate" /> <input class="ui" data-dojo-type="dijit/form/TimeTextBox" name="beginTime" data-dojo-attach-point="beginTime" /></label>
        <label class="small"><span data-href="endDate" class="targetable">Fin :</span><input class="ui" data-dojo-type="dijit/form/DateTextBox" data-dojo-props="constraints: {datePattern: 'EEE dd.MM.yy'}" name="endDate" data-dojo-attach-point="endDate" /> <input class="ui" data-dojo-type="dijit/form/TimeTextBox" name="endTime" data-dojo-attach-point="endTime" /></label>
        <label><input data-dojo-type="dijit/form/CheckBox" name="confirmed" data-dojo-attach-point="nConfirmed" data-dojo-attach-event="click:toggleConfirmed"/> Fin confirmée</label>
        <button data-dojo-type="dijit/form/Button" name="confirmedAndReturned" data-dojo-attach-point="nConfirmedAndReturned" data-dojo-attach-event="click:toggleConfirmedAndReturned">Confirmée et ramenée</button>
      </fieldset>

      <fieldset class="ui" data-dojo-attach-point="nDeliveryFields">
        <legend>Livraison</legend>
        <label class="small"><span>Début :</span><input class="ui" data-dojo-type="dijit/form/DateTextBox" data-dojo-props="constraints: {datePattern: 'EEE dd.MM.yy'}" name="deliveryBeginDate" data-dojo-attach-point="nDeliveryBeginDate" /> <input class="ui" data-dojo-type="dijit/form/TimeTextBox" name="deliveryBeginTime" data-dojo-attach-point="nDeliveryBeginTime" /></label>
        <label class="small"><span>Fin :</span><input class="ui" data-dojo-type="dijit/form/DateTextBox" data-dojo-props="constraints: {datePattern: 'EEE dd.MM.yy'}" name="deliveryEndDate" data-dojo-attach-point="nDeliveryEndDate" /> <input class="ui" data-dojo-type="dijit/form/TimeTextBox" name="deliveryEndTime" data-dojo-attach-point="nDeliveryEndTime" /></label>
      </fieldset>
        
      <fieldset data-dojo-attach-point="nBack" class="ui full" style="display: none">
        <legend class="title">Retour</legend>
        <label><span>Annonce :</span><input class="ui" data-dojo-attach-point="nArrivalDate" data-dojo-type="dijit/form/DateTextBox" data-dojo-props="constraints: {datePattern: 'EEE dd.MM.yy'}" name="arrivalDate" /> <input class="ui" data-dojo-attach-point="nArrivalTime" data-dojo-type="dijit/form/TimeTextBox" name="arrivalTime" /></label>
        <label><span>Responsable :</span><input class="ui" data-dojo-attach-point="nArrivalCreator" name="arrivalCreator" type="text" /></label>
        <label><span>Adresse :</span><textarea class="ui" data-dojo-attach-point="nArrivalAddress" data-dojo-type="dijit/form/Textarea" name="arrivalAddress"></textarea></label>
        <label><span>Localité :</span><input class="ui" data-dojo-attach-point="nArrivalLocality" type="text" name="arrivalLocality" /></label>
        <label><span>Clefs :</span><input class="ui" data-dojo-attach-point="nArrivalKeys" data-dojo-type="dijit/form/TextBox" name="arrivalKeys" /></label>
        <label><span>Remarque :</span><input class="ui" data-dojo-attach-point="nArrivalComment" data-dojo-type="dijit/form/TextBox" name="arrivalComment" /></label>
        <label><input data-dojo-attach-point="nArrivalInprogress" data-dojo-type="dijit/form/CheckBox" name="arrivalInprogress" /> En cours</label>
        <label><input data-dojo-attach-point="nArrivalDone" data-dojo-type="dijit/form/CheckBox" name="arrivalDone" /> Ramenée</label>
      </fieldset>
      
      <fieldset class="full ui">
        <legend>Détails</legend>
	<label><span>Référence :</span><input class="ui" data-dojo-type="dijit/form/TextBox" name="nReference" data-dojo-attach-point="nReference" /></label>
        <label><span>Status :</span><input class="ui" data-dojo-type="dijit/form/Select" name="status" data-dojo-attach-point="nStatus" /></label>
	<label><span>Adresse :</span><textarea class="ui" name="nAddress" data-dojo-attach-point="nAddress" style="min-height: 2ex;"></textarea></label>
	<label><span>Localité :</span><input class="ui" type="text" name="nLocality" data-dojo-attach-point="nLocality" /></label>
        <label><span>GPS :</span><input class="ui" data-dojo-type="dijit/form/TextBox" name="gps" data-dojo-attach-point="nGps" /></label>
	<label><span>Dossier :</span><input class="ui" data-dojo-type="dijit/form/TextBox" name="folder" data-dojo-attach-point="nFolder" /></label>
        <label><span>Responsable :</span><input class="ui" type="text" name="creator" data-dojo-attach-point="nCreator" /></label>
      </fieldset> 
        
      <fieldset class="full ui"><legend>Contacts</legend>
        <div data-dojo-attach-point="nContactsContainer" data-dojo-type="dijit/layout/TabContainer" style="width: 100%; height: 40ex;" data-dojo-props="isLayoutContainer: true"></div>
        <div class="contacts" data-dojo-attach-point="nContacts">
        </div>
      </fieldset>
      
      <fieldset class="ui">
        <legend>Équipement</legend>
        <button style="display: inline-block; clear: right" type="button" name="noEquipement" data-dojo-attach-event="click:evtNoEquipment">Pas d'équipement</button>
        <textarea class="ui" data-dojo-type="dijit/form/Textarea" style="width:100%; min-width: 100%;" name="nEquipment" data-dojo-attach-point="nEquipment"></textarea>
      </fieldset>

      <fieldset class="ui">
        <legend>Commentaire</legend>
        <textarea class="ui" data-dojo-type="dijit/form/Textarea" style="width: 100%; min-width: 100%;" name="nComments" data-dojo-attach-point="nComments"></textarea>
      </fieldset>

      <fieldset class="full ui" data-dojo-attach-point="nComplementsForm">
	<legend>Complément</legend>     
	<div data-dojo-attach-point="complements"></div>
        <label style="max-width: 360px; display: inline-block;"><span>Type :</span><input class="ui" data-dojo-type="dijit/form/Select" name="associationType" data-dojo-attach-point="nAssociationType" /></label>
	<label style="max-width: 240px; display: inline-block;"><span>Nombre :</span><input class="ui" data-dojo-type="dijit/form/NumberTextBox" name="number" data-dojo-attach-point="nNumber" /></label>
	<label style="min-width: 100%; max-width: 100%;"><span>Durant toute la résevation :</span><input class="ui" data-dojo-type="dijit/form/CheckBox" name="nMFollow" data-dojo-attach-point="nMFollow" checked="true" /></label>
	<label style="display: none;"><span>Début :</span><input class="ui" data-dojo-props="constraints: {datePattern: 'EEE dd.MM.yy'}" data-dojo-type="dijit/form/DateTextBox" name="nMBeginDate" data-dojo-attach-point="nMBeginDate" /> <input class="ui" data-dojo-type="dijit/form/TimeTextBox" name="nMBeginTime" data-dojo-attach-point="nMBeginTime" /></label>
	<label style="display: none;"><span>Fin :</span><input class="ui" data-dojo-props="constraints: {datePattern: 'EEE dd.MM.yy'}" data-dojo-type="dijit/form/DateTextBox" name="nMEndDate" data-dojo-attach-point="nMEndDate" /> <input class="ui" data-dojo-type="dijit/form/TimeTextBox" name="nMEndTime" data-dojo-attach-point="nMEndTime" /></label>
	<label><span>Remarque :</span><input class="ui" data-dojo-type="dijit/form/TextBox" name="nMComment" data-dojo-attach-point="nMComment" /></label>
	<input type="hidden" value="" data-dojo-attach-point="nComplementId" name="idComplement" />
	<button data-dojo-type="dijit/form/Button" value="Ajouter" data-dojo-attach-point="nAddEditComplementButton" type="button" data-dojo-attach-event="click:doAddEditComplement" ><i class="fa fa-plus" aria-hidden="true"></i> Ajouter</button>
	<button data-dojo-type="dijit/form/Button" value="Reset" type="button" data-dojo-attach-event="click:doResetComplement" ><i class="fas fa-eraser" aria-hidden="true"></i> Annuler</button>
      </fieldset>
      
      <fieldset class="ui full"><legend>Note interne</legend>
        <textarea class="ui" style="width: 100%; min-width: 100%;" data-dojo-type="dijit/form/Textarea" name="nNote" data-dojo-attach-point="nNote"></textarea>
      </fieldset>
      
      <fieldset class="ui full">
        <legend>Décompte</legend>
        <table class="count dtable" data-dojo-attach-point="nCountTable">
          <thead><tr><th class="ref">Numéro</th><th class="invoice">Facture</th><th class="status">Statut</th><th class="range">Période</th></tr></thead>
          <tbody data-dojo-attach-point="nCountList"></tbody>
        </table>
      </fieldset>
    </div>
  </form>
  
  <div class="command">
    <button data-dojo-type="dijit/form/Button" value="Sauvegarder"
            type="button" data-dojo-attach-event="click:doSave" ><i class="far fa-save" aria-hidden="true"></i> Sauvegarder</button>
    <button data-dojo-type="dijit/form/Button" value="Sauvegarder et quitter"
            type="button" data-dojo-attach-event="click:doSaveAndQuit" ><i class="far fa-save" aria-hidden="true"></i> Sauvegarder et quitter</button>
    <button data-dojo-type="dijit/form/Button" value="Dupliquer"
            type="button" data-dojo-attach-event="click:doCopy" ><i class="far fa-copy" aria-hidden="true"></i> Dupliquer</button>
    <span data-print-type="mission"><button data-dojo-type="dijit/form/Button" value="Mission"
                                            type="button" data-dojo-attach-event="click:evPrint" data-print-type="mission" ><i class="fa fa-print" aria-hidden="true"></i> Mission</button></span>
    <span data-print-type="decompte"><button data-dojo-type="dijit/form/Button" value="Décompte"
                                             type="button" data-dojo-attach-event="click:evPrint" data-print-type="decompte" ><i class="fa fa-print" aria-hidden="true"></i> Reçus</button></span>
    <button data-dojo-type="dijit/form/Button" value="Décompte"
            type="button" data-dojo-attach-event="click:openCount" ><i class="fas fa-file-invoice-dollar" aria-hidden="true"></i> Nouveau décompte</button>
    
    <button data-dojo-type="dijit/form/Button" value="Ajouter au décompte"
            type="button" data-dojo-attach-event="click:openAddCount" ><i class="fas fa-file-invoice-dollar" aria-hidden="true"></i> Ajouter à un décompte</button>
    
    <br/ >
    <button data-dojo-type="dijit/form/Button" value="Supprimer" style="float: right;"
            type="button" data-dojo-attach-event="click:doDelete" ><i class="fa fa-trash-o" aria-hidden="true"></i> Supprimer</button>
  </div>
</div>
    
